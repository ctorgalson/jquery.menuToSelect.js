(function(a){a.fn.menuToSelect=function(g){var b=a.extend({},{baseUrl:"",form:"<form><div></div></form>",hideOriginal:!0,optgroup:"<optgroup/>",optgroupLabelPattern:"",option:"<option/>",select:"<select/>"},g);return this.each(function(e){var d=a(this).css({display:b.hideOriginal?"none":"block"}),c=d.attr("id"),e=("undefined"!==typeof c&&""!==c?c+"-":"")+"menuToSelect-"+e,e=a(b.form).attr({id:e}).addClass("menuToSelect").insertAfter(d),h=a(b.select).change(function(){window.location.href=a(this).val()}); d.children().each(function(e,d){var f=a(d),c=a(d).children("a"),f=f.children("ul"),i=c.text();a(b.option).attr({value:b.baseUrl+c.attr("href")}).text(i).appendTo(h);if(0<f.length){var g=a(b.optgroup).attr({label:""!==b.optgroupLabelPattern?b.optgroupLabelPattern.replace(/\%p/,i):""}).appendTo(h);f.children("li").children("a").each(function(e,d){var c=a(d);a(b.option).attr({value:b.baseUrl+c.attr("href")}).text(c.text()).appendTo(g)})}});e.find("div").append(h)})}})(jQuery);